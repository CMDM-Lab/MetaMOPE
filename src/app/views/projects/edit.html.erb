<%= javascript_pack_tag :application, 'default' %>
<div class='content'>
    <h2 style="font-size:36px">Set parameters</h2>
    <hr style="width:1210px">

    <div>
        <%= link_to "Download test data", send_demo_path(params[:id]) %>
    </div>

    <%= form_for(@project, :url => { :controller => 'projects', :action => 'update', :id => @project}, :html => { :class => "form-horizontal project" }) do |f| %>
        <% if @project.errors.any? %>
            <div id="error_expl" class="panel panel-danger">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <%= pluralize(@project.errors.count, "error") %> prohibited this project from being saved:
                    </h3>
                </div>
                <div class="panel-body">
                    <ul>
                        <% @project.errors.full_messages.each do |msg| %>
                            <li><%= msg %></li>
                        <% end %>
                    </ul>
                </div>
            </div> 
        <% end %>

        <div class="control-group">
            <% if @project.mobile_phase_evaluation %>
                <div class="control-group">
                    <%= f.check_box :is_example, {:id => 'is-example'} %>
                    <%= f.label :Use_default_parameters %><p style="font-weight: bold">(window size = 3.0 / MCQ threshold = 0.9 / peak intensity threshold = 5000.0)</p>
                </div>

                <div class="control-group omit">
                    <%= f.label :Window_size_for_MCQ_calculation, :class => 'control-label' %>
                    <div class="controls field">
                        <%= f.text_field :mcq_win_size, :class => 'form-control' %>
                    </div>
                </div>

                <div class="control-group omit">        
                    <%= f.label :MCQ_threshold, :class => 'control-label' %>
                    <div class="controls field">
                        <%= f.text_field :mcq_threshold, :class => 'form-control' %>
                    </div>
                </div>

                <div class="control-group omit">        
                    <%= f.label :Peak_intensity_threshold, :class => 'control-label' %>
                        <div class="controls field">
                            <%= f.text_field :peak_int_threshold, :class => 'form-control' %>
                        </div>
                </div>
                <br>

                <div class="control-group">
                    <div>
                        <%= f.label :upload_standards_file %>
                        <%= f.file_field :standard %>
                        <br>
                        <br>
                    </div>
                </div>

            <% end %>
            
            <% if @project.peak_evaluation %>
                <div class="control-group">
                    <%= f.check_box :is_example, {:id => 'is-example'} %>
                    <%= f.label :Use_default_parameters %><p style="font-weight: bold">(window size = 3.0 / MCQ threshold = 0.9 / peak intensity threshold = 1000.0 / STD over BLK = 6.0 / RSD of RT = 15.0)</p>
                </div>

                <div class="control-group omit">
                    <%= f.label :Window_size_for_MCQ_calculation, :class => 'control-label' %>
                    <div class="controls field">
                        <%= f.text_field :mcq_win_size, :class => 'form-control' %>
                    </div>
                </div>

                <div class="control-group omit">        
                    <%= f.label :MCQ_threshold, :class => 'control-label' %>
                    <div class="controls field">
                        <%= f.text_field :mcq_threshold, :class => 'form-control' %>
                    </div>
                </div>

                <div class="control-group omit">        
                    <%= f.label :Peak_intensity_threshold, :class => 'control-label' %>
                        <div class="controls field">
                            <%= f.text_field :peak_int_threshold, :class => 'form-control' %>
                        </div>
                </div>

                <div class="control-group omit">        
                    <%= f.label :std_over_blk, :class => 'control-label' %>
                        <div class="controls field">
                            <%= f.text_field :std_blk, :class => 'form-control' %>
                        </div>
                </div>
                <div class="control-group omit">        
                    <%= f.label :RSD_of_rt, :class => 'control-label' %>
                        <div class="controls field">
                            <%= f.text_field :rsd_rt, :class => 'form-control' %>
                        </div>
                </div>
                <br>

                <div class="control-group">

                    <div class="ref">
                        <%= f.label :upload_injection_order_file %>
                        <%= f.file_field :injection %>
                        <br>
                        <br>
                    </div>

                    <div>
                        <%= f.label :upload_standards_file %>
                        <%= f.file_field :standard %>
                        <br>
                        <br>
                    </div>

                </div>

            <% end %>

        </div>

        <%= f.submit "Update" %>

    <% end %>

</div>